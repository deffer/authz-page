<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="fragments/head :: head"></head>

<body>
	<div th:replace="fragments/header :: header (name=${name})"></div>

	<div class="container uoa-container-large">
		<div th:if="${!consents.isEmpty()}">
			<div class="title-with-hint">
				<span>Connected Applications</span>
				<i class="glyphicon glyphicon-question-sign" data-toggle="tooltip" data-placement="top"
				   title="These are sites you have approved manually. If the same site asks for the same access in the future, it will
				be granted without prompting."></i>
			</div>
			<table class="table table-striped">
				<tr><th>Application</th><th>Url</th><th>Scopes</th><th>Granted on</th><th>Expires</th><th>Options</th></tr>
				<tr th:each="app: ${consents}">
					<td><span th:text="${app.name}" th:title="${app.access_token}"></span></td>
					<td><span th:text="${app.host}" th:title="${app.callbacks}"></span></td>
					<td><span th:text="${app.scope}"></span></td>
					<td><span th:text="${app.issuedStr}"></span></td>
					<td><span th:text="${app.expiresStr}"></span></td>
					<td>
						<a class="btn btn-xs" href="#" th:onclick="'deleteToken(\''+${app.id}+'\');'">
							<span class="glyphicon glyphicon-trash disable-links"></span> Remove
						</a>
					</td>
				</tr>
			</table>
		</div>

		<div>
			<div class="title-with-hint">
				<span>Active tokens</span>
				<i class="glyphicon glyphicon-question-sign" data-toggle="tooltip" data-placement="top"
				   title="Access tokens allow client applications to access your data. These tokens are usually short-lived."></i>
			</div>

			<table class="table table-striped table-condensed">
				<tr><th>Application</th><th>Scopes</th><th>Issued on</th><th>Expires on</th><th>Options</th></tr>
				<tr th:each="tk: ${tokens}">
					<td><span th:text="${tk.name}" th:title="${tk.access_token}"></span></td>
					<td><span th:text="${tk.scope}"></span></td>
					<td><span th:text="${tk.issuedStr}" th:title="${tk.issuedHint}"></span></td>
					<td><span th:text="${tk.expiresStr}" th:title="${tk.expiresHint}"></span></td>
					<td><a class="btn btn-xs" href="#" th:onclick="'deleteToken(\''+${tk.id}+'\');'">
						<span class="glyphicon glyphicon-trash"></span> Revoke
					</a></td>
				</tr>
			</table>
		</div>

	</div>
	<!-- /container -->
	<div th:replace="fragments/footer :: footer"></div>
</body>
</html>